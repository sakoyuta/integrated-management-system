<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>営業育成管理ダッシュボード</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .circular-progress {
            width: 120px;
            height: 120px;
        }
        .progress-ring {
            transform: rotate(-90deg);
        }
        .progress-circle {
            transition: stroke-dashoffset 0.5s ease;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen font-sans">
    <!-- Header -->
    <header class="bg-white shadow-sm">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <h1 class="text-2xl font-bold text-gray-800">営業育成管理ダッシュボード</h1>
            <button id="adminToggle" class="px-3 py-1.5 text-sm font-semibold rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300">
                管理者モード
            </button>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8">
        <!-- Legend -->
        <div class="bg-white p-4 rounded-lg shadow-md mb-6 text-sm text-gray-700 flex flex-wrap gap-x-6 gap-y-2 items-center">
            <h3 class="font-bold w-full mb-2 md:w-auto md:mb-0">【凡例】</h3>
            <span><strong class="text-green-500 text-base">◎</strong> : 部門長のロープレ合格済</span>
            <span><strong class="text-yellow-500 text-base">△</strong> : ロープレができる状態だが不合格</span>
            <span><strong class="text-red-500 text-base">✖</strong> : ロープレが出来ず知識が不足している状態</span>
        </div>

        <!-- Sales Rep Tabs -->
        <div class="mb-6 border-b border-gray-200">
            <nav class="-mb-px flex space-x-6 overflow-x-auto" id="repTabs">
                <!-- Tabs will be populated by JavaScript -->
            </nav>
        </div>

        <!-- Dashboard Content -->
        <div class="bg-white p-6 rounded-lg shadow-md">
            <div class="flex flex-col md:flex-row items-center justify-start p-6 border-b mb-6 rounded-t-lg bg-gray-50 gap-x-8 gap-y-6">
                <div class="flex items-center flex-shrink-0">
                    <div class="circular-progress relative flex items-center justify-center">
                        <svg class="progress-ring w-full h-full">
                            <circle class="text-gray-200" stroke="currentColor" stroke-width="10" fill="transparent" r="50" cx="60" cy="60"/>
                            <circle id="progressCircle" class="text-blue-500 progress-circle" stroke="currentColor" stroke-width="10"
                                    stroke-dasharray="314" stroke-dashoffset="200" stroke-linecap="round" fill="transparent" r="50" cx="60" cy="60"/>
                        </svg>
                        <span id="progressText" class="absolute text-2xl font-bold text-gray-700">68%</span>
                    </div>
                    <div class="ml-6 text-left">
                        <h2 class="text-2xl font-bold text-gray-800">Gハウス営業マン達成度</h2>
                        <p id="taskProgress" class="text-gray-600">14 / 21 タスク完了</p>
                    </div>
                </div>
            </div>

            <!-- Training Items Grid -->
            <div id="trainingGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6">
                <!-- Training items will be populated by JavaScript -->
            </div>
        </div>
    </main>

    <script>
        // Sample data
        const salesReps = [
            { id: 'rep1', name: '德田 耕明' },
            { id: 'rep2', name: '田畑 美香' },
            { id: 'rep3', name: '金村 晃功' }
        ];

        const trainingItems = [
            { id: 'item1', name: 'ヒアリングトーク', category: '商談スキル', status: '◎' },
            { id: 'item2', name: '暮らしの上位概念トーク', category: '商談スキル', status: '△' },
            { id: 'item3', name: '資金計画書説明トーク', category: '資金計画', status: '✖' },
            { id: 'item4', name: 'スケジュール決定トーク', category: '商談スキル', status: '未着手' },
            { id: 'item5', name: '土地トーク', category: '土地知識', status: '◎' },
            { id: 'item6', name: '競合対策トーク', category: '商談スキル', status: '△' }
        ];

        const statusColors = {
            '未着手': { text: 'text-gray-500', bg: 'bg-gray-200' },
            '✖': { text: 'text-red-500', bg: 'bg-red-200' },
            '△': { text: 'text-yellow-500', bg: 'bg-yellow-200' },
            '◎': { text: 'text-green-500', bg: 'bg-green-200' }
        };

        let currentRepIndex = 0;

        function initializeTabs() {
            const tabsContainer = document.getElementById('repTabs');
            salesReps.forEach((rep, index) => {
                const tab = document.createElement('button');
                tab.className = `whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm ${
                    index === 0 ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'
                }`;
                tab.textContent = rep.name;
                tab.onclick = () => switchRep(index);
                tabsContainer.appendChild(tab);
            });
        }

        function switchRep(index) {
            currentRepIndex = index;
            updateTabs();
            updateDashboard();
        }

        function updateTabs() {
            const tabs = document.querySelectorAll('#repTabs button');
            tabs.forEach((tab, index) => {
                if (index === currentRepIndex) {
                    tab.className = 'whitespace-nowrap py-4 px-3 border-b-2 border-blue-500 text-blue-600 font-medium text-sm';
                } else {
                    tab.className = 'whitespace-nowrap py-4 px-3 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium text-sm';
                }
            });
        }

        function updateDashboard() {
            renderTrainingItems();
        }

        function renderTrainingItems() {
            const grid = document.getElementById('trainingGrid');
            grid.innerHTML = '';

            trainingItems.forEach(item => {
                const statusColor = statusColors[item.status];
                const itemDiv = document.createElement('div');
                itemDiv.className = 'p-4 border rounded-lg hover:shadow-lg transition-shadow flex flex-col bg-white';
                itemDiv.innerHTML = `
                    <div class="flex items-start justify-between mb-3">
                        <div class="flex-1">
                            <p class="font-semibold text-gray-700">${item.name}</p>
                            <p class="text-sm text-gray-500">${item.category}</p>
                        </div>
                    </div>
                    <div class="mt-auto space-y-3">
                        <div class="w-full bg-gray-200 rounded-full h-2.5">
                            <div class="${statusColor.bg} h-2.5 rounded-full" style="width: ${getStatusWidth(item.status)}%"></div>
                        </div>
                        <select class="w-full p-2 border rounded-md ${statusColor.text}">
                            <option value="未着手" ${item.status === '未着手' ? 'selected' : ''}>未着手</option>
                            <option value="✖" ${item.status === '✖' ? 'selected' : ''}>✖</option>
                            <option value="△" ${item.status === '△' ? 'selected' : ''}>△</option>
                            <option value="◎" ${item.status === '◎' ? 'selected' : ''}>◎</option>
                        </select>
                    </div>
                `;
                grid.appendChild(itemDiv);
            });
        }

        function getStatusWidth(status) {
            const widths = { '未着手': 0, '✖': 10, '△': 50, '◎': 100 };
            return widths[status] || 0;
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initializeTabs();
            updateDashboard();
        });
    </script>
</body>
</html>